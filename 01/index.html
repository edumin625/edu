<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€êµ¬ë¥¼ ì‹í˜€ë¼! íƒ„ì†Œì¤‘ë¦½ íˆì–´ë¡œ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f9ff; /* sky-50 */
        }

        .animate-fade-in { animation: fadeIn 0.5s ease-in; }
        .animate-slide-up { animation: slideUp 0.5s ease-out; }
        .animate-bounce-slow { animation: bounce 2s infinite; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* ì¸ì‡„ ì„¤ì • */
        @media print {
            body * { visibility: hidden; }
            #certificate-container, #certificate-container * { visibility: visible; }
            #certificate-container {
                position: absolute;
                left: 0; top: 0;
                width: 100%; height: 100%;
                display: flex; justify-content: center; align-items: center;
                background: white;
                margin: 0; padding: 0;
                border: none;
            }
            #certificate-card {
                border: 5px solid #fcd34d; /* yellow-300 */
                width: 100%;
                height: 90%;
                display: flex; flex-direction: column; justify-content: center; align-items: center;
            }
            .no-print { display: none !important; }
        }

        /* ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .card {
            background: white;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        .card-header {
            background-color: #22c55e; /* green-500 */
            padding: 1rem 1.5rem;
            color: white;
            font-weight: 700;
            font-size: 1.25rem;
            display: flex; align-items: center;
        }
        .card-body { padding: 1.5rem; }

        /* ì§„í–‰ë°” */
        .progress-track {
            width: 100%; background-color: #e5e7eb; border-radius: 9999px; height: 0.625rem; margin-bottom: 2rem;
        }
        .progress-bar {
            height: 0.625rem; border-radius: 9999px; transition: width 0.5s;
        }
    </style>
</head>
<body class="selection:bg-green-200">

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="bg-white shadow-md sticky top-0 z-50 no-print">
        <div class="max-w-4xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2 cursor-pointer" onclick="switchTab('home')">
                <i data-lucide="tree-pine" class="text-green-600 w-8 h-8"></i>
                <span class="text-xl font-bold text-green-800">ì§€êµ¬ë¥¼ ì‹í˜€ë¼!</span>
            </div>
            <div class="flex space-x-2">
                <button onclick="switchTab('lesson1')" id="nav-l1" class="flex items-center space-x-1 px-4 py-2 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-all">
                    <i data-lucide="book-open" size="18"></i> <span class="text-sm md:text-base font-medium">1êµì‹œ</span>
                </button>
                <button onclick="switchTab('lesson2')" id="nav-l2" class="flex items-center space-x-1 px-4 py-2 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-all">
                    <i data-lucide="school" size="18"></i> <span class="text-sm md:text-base font-medium">2êµì‹œ</span>
                </button>
            </div>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto p-4 pb-20">
        
        <!-- í™ˆ í™”ë©´ -->
        <section id="home-section" class="flex flex-col items-center justify-center text-center mt-10 space-y-8 animate-fade-in">
            <div class="relative">
                <div class="absolute -top-10 -right-10 animate-bounce">
                    <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Travel%20and%20places/Sun.png" alt="Sun" width="80" />
                </div>
                <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Travel%20and%20places/Globe%20Showing%20Asia-Australia.png" alt="Earth" width="200" class="animate-pulse drop-shadow-2xl" />
            </div>
            <div>
                <h1 class="text-4xl md:text-5xl font-extrabold text-green-800 mb-4">íƒ„ì†Œì¤‘ë¦½,<br class="md:hidden" /> ìš°ë¦¬ í•™êµì—ì„œ ì‹¤ì²œí•´ìš”!</h1>
                <p class="text-lg text-gray-600 mb-8 bg-white p-4 rounded-xl shadow-sm inline-block">
                    ì´ˆë“±í•™êµ 3í•™ë…„ ì¹œêµ¬ë“¤! <br/>
                    ì—´ì´ ë‚˜ëŠ” ì§€êµ¬ë¥¼ êµ¬í•˜ê¸° ìœ„í•œ <span class="text-green-600 font-bold">íƒ„ì†Œì¤‘ë¦½ íˆì–´ë¡œ</span>ê°€ ë˜ì–´ë³¼ê¹Œìš”?
                </p>
            </div>
            <button onclick="switchTab('lesson1')" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white text-2xl font-bold px-10 py-4 rounded-3xl shadow-xl hover:scale-105 transition-transform flex items-center space-x-3">
                <span>ìˆ˜ì—… ì‹œì‘í•˜ê¸°</span>
                <i data-lucide="zap" class="fill-yellow-300 text-yellow-300"></i>
            </button>
        </section>

        <!-- 1êµì‹œ ì»¨í…Œì´ë„ˆ -->
        <section id="lesson1-section" class="hidden space-y-8">
            <!-- ì§„í–‰ë°” -->
            <div class="progress-track no-print"><div id="l1-progress" class="progress-bar bg-green-600" style="width: 25%"></div></div>

            <!-- L1-0: ë„ì… -->
            <div id="l1-step-0" class="card animate-slide-up">
                <div class="card-header">1êµì‹œ: ì§€êµ¬ê°€ ì—´ì´ ë‚˜ìš”!</div>
                <div class="card-body text-center space-y-6">
                    <p class="text-xl font-medium">ì˜¤ëŠ˜ ë°°ìš¸ ë‚´ìš©ì€?</p>
                    <ul class="text-left bg-green-50 p-6 rounded-xl space-y-3 text-lg">
                        <li class="flex items-center"><i data-lucide="alert-circle" class="text-red-500 mr-2"></i> ì§€êµ¬ê°€ ì™œ ëœ¨ê±°ì›Œì§€ëŠ”ì§€ ì•Œì•„ë´ìš”.</li>
                        <li class="flex items-center"><i data-lucide="check-circle-2" class="text-blue-500 mr-2"></i> 'íƒ„ì†Œì¤‘ë¦½ 0(Zero)'ê°€ ë¬´ì—‡ì¸ì§€ ë°°ì›Œìš”.</li>
                    </ul>
                    <button onclick="setL1Step(1)" class="bg-green-500 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-600 transition-colors">ì¶œë°œ!</button>
                </div>
            </div>

            <!-- L1-1: ì•„í”ˆ ì§€êµ¬ -->
            <div id="l1-step-1" class="card animate-slide-up hidden">
                <div class="card-header">í™œë™ 1: íƒ„ì†Œ ì´ë¶ˆì„ ë®ì€ ì§€êµ¬</div>
                <div class="card-body flex flex-col items-center space-y-6">
                    <div id="earth-visual" class="relative w-64 h-64 flex items-center justify-center bg-blue-100 rounded-full transition-all duration-500" style="filter: hue-rotate(0deg) saturate(100%)">
                        <span class="text-9xl select-none relative z-10">ğŸŒ</span>
                        <div id="tree-layer" class="absolute inset-0 w-full h-full z-20 pointer-events-none overflow-hidden rounded-full"></div>
                        <div id="earth-sweat" class="absolute top-10 right-10 text-4xl animate-bounce hidden z-30">ğŸ’¦</div>
                        <div id="earth-sweat-2" class="absolute top-20 left-5 text-3xl animate-pulse hidden z-30">ğŸ˜“</div>
                    </div>
                    
                    <div class="bg-orange-100 p-4 rounded-lg w-full text-center">
                        <p class="font-bold text-lg mb-2">í˜„ì¬ íƒ„ì†Œ ì´ë¶ˆ ê°œìˆ˜: <span id="temp-count">0</span>ì¥</p>
                        <div class="flex justify-center gap-4">
                            <button onclick="changeTemp(1)" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800">íƒ„ì†Œ ì´ë¶ˆ ë®ê¸° ğŸŒ«ï¸</button>
                            <button onclick="changeTemp(-1)" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">ë‚˜ë¬´ ì‹¬ê¸° ğŸŒ³</button>
                        </div>
                    </div>
                    <div class="text-left bg-gray-50 p-4 rounded-lg border border-gray-200 w-full">
                        <p class="mb-2"><strong>ì„ ìƒë‹˜ ë§ì”€:</strong></p>
                        <p>ìš°ë¦¬ê°€ ìë™ì°¨ë¥¼ íƒ€ê³  ì „ê¸°ë¥¼ ë‚­ë¹„í•  ë•Œë§ˆë‹¤ ì§€êµ¬ëŠ” <strong>'íƒ„ì†Œ'</strong>ë¼ëŠ” ë‘êº¼ìš´ ì´ë¶ˆì„ ë®ê²Œ ë¼ìš”. ì´ë¶ˆì„ ë„ˆë¬´ ë§ì´ ë®ìœ¼ë©´ ì§€êµ¬ê°€ ì—´ì´ ë‚œë‹µë‹ˆë‹¤.</p>
                        <a href="https://gemini.google.com/share/d7c4855c1c28" target="_blank" class="mt-3 inline-flex items-center bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-bold">
                            <i data-lucide="book-open" class="w-4 h-4 mr-2"></i> ë™í™”ë³´ê¸°
                        </a>
                    </div>
                    <button onclick="setL1Step(2)" class="bg-green-500 text-white w-full py-3 rounded-xl font-bold">ë‹¤ìŒ í™œë™: íƒ„ì†Œì¤‘ë¦½ 0 ë§Œë“¤ê¸°</button>
                </div>
            </div>

            <!-- L1-2: ì €ìš¸ ê²Œì„ -->
            <div id="l1-step-2" class="card animate-slide-up hidden">
                <div class="card-header">í™œë™ 2: íƒ„ì†Œì¤‘ë¦½ ì €ìš¸ ë†€ì´</div>
                <div class="card-body flex flex-col items-center space-y-6">
                    <div class="text-center mb-4">
                        <p class="text-lg text-gray-700">ë°°ì¶œí•˜ëŠ” íƒ„ì†Œ(+)ì™€ ì—†ì• ëŠ” íƒ„ì†Œ(-)ë¥¼ ê°™ê²Œ ë§Œë“¤ì–´ì„œ</p>
                        <p class="text-2xl font-bold text-green-600">'0 (Zero)'ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”!</p>
                    </div>

                    <!-- ì €ìš¸ ì‹œê°í™” -->
                    <div class="relative w-full h-32 flex items-end justify-center mb-8">
                        <div id="scale-bar" class="w-64 h-2 bg-gray-800 transition-transform duration-500 origin-center rounded-full rotate-12"></div>
                        <div class="absolute bottom-0 w-0 h-0 border-l-[20px] border-l-transparent border-r-[20px] border-r-transparent border-b-[40px] border-b-gray-400"></div>
                        
                        <!-- ì™¼ìª½ (ë°°ì¶œ) -->
                        <div id="scale-left" class="absolute left-10 bottom-10 transition-all duration-500 mb-8">
                            <div class="flex flex-col items-center"><div class="text-4xl">ğŸ­</div><span class="font-bold text-red-500">ë°°ì¶œ (+)</span></div>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½ (í¡ìˆ˜) -->
                        <div id="scale-right" class="absolute right-10 bottom-10 transition-all duration-500 -mb-4">
                            <div class="flex flex-col items-center"><div class="text-4xl">ğŸŒ³</div><span class="font-bold text-blue-500">í¡ìˆ˜ (-)</span></div>
                        </div>
                        <!-- ê²°ê³¼ ê°’ -->
                        <div id="balance-val" class="absolute -top-10 font-mono text-3xl font-bold bg-white px-4 py-1 rounded shadow border">+3</div>
                    </div>

                    <div id="balance-msg" class="p-3 rounded-lg font-bold text-center w-full bg-gray-100">íƒ„ì†Œê°€ ë„ˆë¬´ ë§ì•„ìš”! ì¤„ì—¬ì£¼ì„¸ìš”!</div>

                    <div class="grid grid-cols-2 gap-4 w-full">
                        <div class="space-y-2">
                            <p class="text-center text-sm font-bold text-red-500">íƒ„ì†Œ ë°œìƒ (ë‚˜ìœ ìŠµê´€)</p>
                            <button onclick="updateBalance(1)" class="w-full bg-red-100 hover:bg-red-200 p-3 rounded text-left flex items-center"><i data-lucide="trash-2" class="w-4 h-4 mr-2"></i> ì“°ë ˆê¸° ë²„ë¦¬ê¸° (+1)</button>
                            <button onclick="updateBalance(2)" class="w-full bg-red-100 hover:bg-red-200 p-3 rounded text-left flex items-center"><i data-lucide="wind" class="w-4 h-4 mr-2"></i> ìë™ì°¨ íƒ€ê¸° (+2)</button>
                        </div>
                        <div class="space-y-2">
                            <p class="text-center text-sm font-bold text-blue-500">íƒ„ì†Œ í¡ìˆ˜/ì ˆì•½ (ì°©í•œ í–‰ë™)</p>
                            <button onclick="updateBalance(-1)" class="w-full bg-blue-100 hover:bg-blue-200 p-3 rounded text-left flex items-center"><i data-lucide="lightbulb" class="w-4 h-4 mr-2"></i> ë¹ˆ ë°© ë¶ˆ ë„ê¸° (-1)</button>
                            <button onclick="updateBalance(-2)" class="w-full bg-blue-100 hover:bg-blue-200 p-3 rounded text-left flex items-center"><i data-lucide="tree-pine" class="w-4 h-4 mr-2"></i> ë‚˜ë¬´ ì‹¬ê¸° (-2)</button>
                        </div>
                    </div>
                    <button id="btn-l1-finish" class="hidden bg-green-500 text-white w-full py-3 rounded-xl font-bold animate-bounce" onclick="setL1Step(3)">ì„±ê³µ! í€´ì¦ˆ í’€ëŸ¬ ê°€ê¸°</button>
                </div>
            </div>

            <!-- L1-3: í€´ì¦ˆ -->
            <div id="l1-step-3" class="card animate-slide-up hidden">
                <div class="card-header">ì •ë¦¬ í€´ì¦ˆ</div>
                <div class="card-body text-center space-y-8">
                    <div class="min-h-[80px] flex items-center justify-center">
                        <h3 id="quiz-q" class="text-xl md:text-2xl font-bold break-keep">ì§€êµ¬ê°€ ëœ¨ê±°ì›Œì§€ëŠ” ì´ìœ ëŠ” ìš°ë¦¬ê°€ 'íƒ„ì†Œ ì´ë¶ˆ'ì„ ë„ˆë¬´ ë§ì´ ë®ì–´ì„œì´ë‹¤.</h3>
                    </div>
                    <div id="quiz-options" class="flex gap-4 justify-center">
                        <button onclick="checkQuiz(true)" class="w-32 h-32 bg-blue-100 rounded-2xl border-4 border-blue-300 text-6xl text-blue-600 hover:bg-blue-200 flex items-center justify-center">O</button>
                        <button onclick="checkQuiz(false)" class="w-32 h-32 bg-red-100 rounded-2xl border-4 border-red-300 text-6xl text-red-600 hover:bg-red-200 flex items-center justify-center">X</button>
                    </div>
                    <div id="quiz-result" class="hidden p-4 rounded-xl"></div>
                </div>
            </div>

            <!-- L1-Finish -->
            <div id="l1-finish" class="card animate-slide-up hidden">
                <div class="card-header">1êµì‹œ ì™„ë£Œ!</div>
                <div class="card-body text-center space-y-6 py-10">
                    <div class="text-6xl">ğŸ‰</div>
                    <h2 class="text-2xl font-bold text-green-800">ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
                    <p class="text-lg">íƒ„ì†Œì¤‘ë¦½ ê°œë… ë°•ì‚¬ê°€ ë˜ì…¨êµ°ìš”!</p>
                    <button onclick="switchTab('lesson2')" class="bg-green-500 text-white px-8 py-3 rounded-xl font-bold">2êµì‹œ: ì‹¤ì²œí•˜ëŸ¬ ê°€ê¸° ğŸ‘‰</button>
                </div>
            </div>
        </section>

        <!-- 2êµì‹œ ì»¨í…Œì´ë„ˆ -->
        <section id="lesson2-section" class="hidden space-y-8">
            <div class="progress-track no-print"><div id="l2-progress" class="progress-bar bg-blue-600" style="width: 33%"></div></div>

            <!-- L2-1: ë³´ë¬¼ì°¾ê¸° -->
            <div id="l2-step-0" class="card animate-slide-up">
                <div class="card-header">í™œë™ 1: í•™êµ ì† íƒ„ì†Œ ì¤„ì´ê¸° ì‘ì „</div>
                <div class="card-body">
                    <p class="text-center mb-4 text-gray-600">í•™êµì˜ ì¥ì†Œë“¤ì„ í´ë¦­í•´ì„œ ìˆ¨ì–´ìˆëŠ” ì‹¤ì²œ ë°©ë²•ì„ ëª¨ë‘ ì°¾ì•„ë³´ì„¸ìš”! (<span id="hunt-count">0</span>/4)</p>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <button id="hunt-btn-1" onclick="foundItem(1)" class="p-4 rounded-xl border-2 bg-white border-gray-200 hover:bg-gray-50 hover:shadow-md transition-all flex flex-col items-center h-32 justify-center">
                            <div class="text-3xl mb-2">â“</div><div class="font-bold text-gray-700">êµì‹¤</div>
                        </button>
                        <button id="hunt-btn-2" onclick="foundItem(2)" class="p-4 rounded-xl border-2 bg-white border-gray-200 hover:bg-gray-50 hover:shadow-md transition-all flex flex-col items-center h-32 justify-center">
                            <div class="text-3xl mb-2">â“</div><div class="font-bold text-gray-700">ê¸‰ì‹ì‹¤</div>
                        </button>
                        <button id="hunt-btn-3" onclick="foundItem(3)" class="p-4 rounded-xl border-2 bg-white border-gray-200 hover:bg-gray-50 hover:shadow-md transition-all flex flex-col items-center h-32 justify-center">
                            <div class="text-3xl mb-2">â“</div><div class="font-bold text-gray-700">ë³µë„</div>
                        </button>
                        <button id="hunt-btn-4" onclick="foundItem(4)" class="p-4 rounded-xl border-2 bg-white border-gray-200 hover:bg-gray-50 hover:shadow-md transition-all flex flex-col items-center h-32 justify-center">
                            <div class="text-3xl mb-2">â“</div><div class="font-bold text-gray-700">í™”ì¥ì‹¤</div>
                        </button>
                    </div>
                    <div id="hunt-msg" class="bg-yellow-50 p-4 rounded-lg mb-4 hidden">
                        <h4 class="font-bold mb-2 text-yellow-800">ë°œê²¬í•œ íŒ:</h4>
                        <p id="hunt-text" class="text-gray-700"></p>
                    </div>
                    <button id="btn-l2-next1" onclick="setL2Step(1)" class="hidden bg-green-500 text-white w-full py-3 rounded-xl font-bold animate-pulse">ëª¨ë‘ ì°¾ì•˜ë‹¤! ë¹™ê³ í•˜ëŸ¬ ê°€ê¸°</button>
                </div>
            </div>

            <!-- L2-2: ë¹™ê³  -->
            <div id="l2-step-1" class="card animate-slide-up hidden">
                <div class="card-header">í™œë™ 2: íƒ„ì†Œì¤‘ë¦½ ì‹¤ì²œ ë¹™ê³ </div>
                <div class="card-body">
                    <div class="text-center mb-4">
                        <p>ë‚´ê°€ í•™êµì—ì„œ ì§€í‚¬ ìˆ˜ ìˆëŠ” ì•½ì†ì„ í´ë¦­í•˜ì„¸ìš”!</p>
                        <p class="text-sm text-gray-500">3ê°œ ì´ìƒ ì„ íƒí•˜ë©´ íˆì–´ë¡œê°€ ë  ì¤€ë¹„ ì™„ë£Œ!</p>
                    </div>
                    <div class="grid grid-cols-3 gap-2 md:gap-4 mb-6 max-w-sm mx-auto" id="bingo-grid">
                        <!-- JS generated -->
                    </div>
                    <div class="text-center mb-4 font-bold text-green-700">í˜„ì¬ <span id="bingo-count">0</span>ê°œì˜ ì•½ì†ì„ ì„ íƒí–ˆì–´ìš”!</div>
                    <button id="btn-bingo-next" disabled class="w-full bg-gray-300 text-gray-500 py-3 rounded-xl cursor-not-allowed" onclick="setL2Step(2)">3ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”</button>
                </div>
            </div>

            <!-- L2-3: ì„ ì„œì‹ (ì…ë ¥) -->
            <div id="l2-step-2" class="card animate-slide-up hidden">
                <div class="card-header">ì •ë¦¬: íˆì–´ë¡œ ì„ ì„œì‹</div>
                <div class="card-body text-center space-y-6">
                    <h3 class="text-xl font-bold text-gray-800">ë§ˆì§€ë§‰ ê´€ë¬¸ì…ë‹ˆë‹¤!</h3>
                    <div class="bg-white p-6 rounded-xl border-2 border-green-100 shadow-inner">
                        <p class="text-2xl font-black text-green-600 mb-4">"ë‚˜ëŠ” ì§€êµ¬ë¥¼ ì§€í‚¤ëŠ”<br/>íƒ„ì†Œì¤‘ë¦½ íˆì–´ë¡œì…ë‹ˆë‹¤!"</p>
                        <p class="text-gray-500 mb-4">ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì„ ì„œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
                        <input type="text" id="hero-name-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full p-3 border-2 border-gray-300 rounded-lg text-center text-lg focus:border-green-500 outline-none" oninput="checkNameInput()">
                    </div>
                    <button id="btn-generate-cert" disabled onclick="showCertificate()" class="bg-gray-300 text-gray-500 w-full py-3 rounded-xl font-bold cursor-not-allowed transition-colors">íˆì–´ë¡œ ì„ëª…ì¥ ë°›ê¸°</button>
                </div>
            </div>

            <!-- L2-4: ì¸ì¦ì„œ (ê²°ê³¼) -->
            <div id="l2-step-3" class="card animate-slide-up hidden">
                <div class="card-header no-print">ì¸ì¦ì„œ ë°œê¸‰ ì™„ë£Œ</div>
                <div class="card-body">
                    <div id="certificate-container" class="relative">
                        <div id="certificate-card" class="bg-gradient-to-br from-yellow-100 to-amber-100 p-8 rounded-xl border-4 border-yellow-300 text-center relative shadow-lg min-h-[400px] flex flex-col justify-center items-center">
                            <div class="absolute top-8 left-1/2 -translate-x-1/2 bg-yellow-400 text-white p-3 rounded-full shadow-lg">
                                <i data-lucide="medal" size="40"></i>
                            </div>
                            <h2 class="text-3xl font-black text-yellow-800 mt-10 mb-6">íƒ„ì†Œì¤‘ë¦½ íˆì–´ë¡œ ì¸ì¦ì„œ</h2>
                            <p class="text-xl text-gray-700 mb-6">ì´ë¦„: <span id="cert-name" class="font-bold text-2xl underline decoration-wavy decoration-green-500"></span></p>
                            <p class="text-lg text-gray-600 leading-relaxed mb-8 font-medium">
                                ìœ„ í•™ìƒì€ ì§€êµ¬ë¥¼ ì‚¬ë‘í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ<br/>
                                í•™êµì—ì„œ íƒ„ì†Œì¤‘ë¦½ ì‹¤ì²œì„ ì•½ì†í•˜ì˜€ê¸°ì—<br/>
                                ì´ ì¸ì¦ì„œë¥¼ ë“œë¦½ë‹ˆë‹¤.
                            </p>
                            <div class="text-base text-gray-500 font-bold">ë¶€ì‚°ëŒ€í•™êµ í™˜ê²½êµìœ¡ì„¼í„°</div>
                            <div class="absolute bottom-6 right-6 opacity-60 rotate-[-15deg] border-4 border-red-500 text-red-500 rounded-full w-24 h-24 flex items-center justify-center font-black text-lg">ì°¸ì˜í–ˆì–´ìš”</div>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-center space-x-4 no-print">
                        <button onclick="switchTab('home')" class="bg-gray-100 text-gray-600 px-6 py-3 rounded-xl font-medium hover:bg-gray-200">ì²˜ìŒìœ¼ë¡œ</button>
                        <button onclick="downloadPDF()" id="btn-pdf" class="bg-green-500 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-600 flex items-center">
                            <i data-lucide="download" class="mr-2"></i> PDFë¡œ ì €ì¥í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // --- ì „ì—­ ìƒíƒœ ë° ë°ì´í„° ---
        let temp = 0;
        let balance = 3;
        let foundItems = [];
        let bingoChecked = Array(9).fill(false);
        
        const huntData = {
            1: { place: "êµì‹¤", icon: "ğŸ’¡", action: "ë¹ˆ êµì‹¤ ë¶ˆ ë„ê¸°", text: "êµì‹¤ì´ ë¹„ì–´ìˆì„ ë• ìŠ¤ìœ„ì¹˜ë¥¼ ë‚´ë ¤ìš”!" },
            2: { place: "ê¸‰ì‹ì‹¤", icon: "ğŸ±", action: "ê¸‰ì‹ ë‚¨ê¸°ì§€ ì•Šê¸°", text: "ìŒì‹ë¬¼ ì“°ë ˆê¸°ë„ íƒ„ì†Œë¥¼ ë§Œë“¤ì–´ìš”!" },
            3: { place: "ë³µë„", icon: "ğŸ—‘ï¸", action: "ë¶„ë¦¬ë°°ì¶œ í•˜ê¸°", text: "ìº”, í”Œë¼ìŠ¤í‹±, ì¢…ì´ë¥¼ ë¼ë¦¬ë¼ë¦¬ ëª¨ì•„ìš”." },
            4: { place: "í™”ì¥ì‹¤", icon: "ğŸ’§", action: "ë¬¼ ì•„ê»´ ì“°ê¸°", text: "ì† ì”»ì„ ë•Œ ë¬¼ì„ í‹€ì–´ë†“ì§€ ì•Šì•„ìš”." }
        };

        const bingoTexts = [
            "ë¹ˆ êµì‹¤ ë¶ˆ ë„ê¸°", "ê¸‰ì‹ ë‹¤ ë¨¹ê¸°", "ì´ë©´ì§€ ì‚¬ìš©í•˜ê¸°",
            "ë¬¼ ì•„ê»´ ì“°ê¸°", "ê°€ê¹Œìš´ ê±°ë¦¬ ê±·ê¸°", "ë¶„ë¦¬ë°°ì¶œ ì˜í•˜ê¸°",
            "ì¥ë°”êµ¬ë‹ˆ ì“°ê¸°", "ë‚˜ë¬´ ì‚¬ë‘í•˜ê¸°", "ê³„ë‹¨ ì´ìš©í•˜ê¸°"
        ];

        const quizData = [
            { q: "ì§€êµ¬ê°€ ëœ¨ê±°ì›Œì§€ëŠ” ì´ìœ ëŠ” ìš°ë¦¬ê°€ 'íƒ„ì†Œ ì´ë¶ˆ'ì„ ë„ˆë¬´ ë§ì´ ë®ì–´ì„œì´ë‹¤.", a: true },
            { q: "íƒ„ì†Œì¤‘ë¦½ì€ íƒ„ì†Œë¥¼ ì•„ì˜ˆ ì—†ì• ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤.", a: false, exp: "ì•„ë‹ˆì—ìš”! ë°°ì¶œëŸ‰ê³¼ í¡ìˆ˜ëŸ‰ì„ ê°™ê²Œ ë§Œë“¤ì–´ '0'ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ì—ìš”." },
            { q: "ì „ê¸°ë¥¼ ì•„ê»´ ì“°ëŠ” ê²ƒì€ íƒ„ì†Œë¥¼ ì¤„ì´ëŠ” ì¼ì´ë‹¤.", a: true }
        ];
        let currentQuizIdx = 0;

        // --- ì´ˆê¸°í™” ---
        window.onload = function() {
            lucide.createIcons();
            initBingo();
        };

        // --- ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§ ---
        function switchTab(tab) {
            document.getElementById('home-section').classList.add('hidden');
            document.getElementById('lesson1-section').classList.add('hidden');
            document.getElementById('lesson2-section').classList.add('hidden');
            
            // Nav active states
            const nav1 = document.getElementById('nav-l1');
            const nav2 = document.getElementById('nav-l2');
            nav1.className = nav1.className.replace('bg-green-500 text-white shadow-md', 'bg-gray-100 text-gray-600');
            nav2.className = nav2.className.replace('bg-green-500 text-white shadow-md', 'bg-gray-100 text-gray-600');

            if(tab === 'home') {
                document.getElementById('home-section').classList.remove('hidden');
            } else if (tab === 'lesson1') {
                document.getElementById('lesson1-section').classList.remove('hidden');
                nav1.className = "flex items-center space-x-1 px-4 py-2 rounded-full bg-green-500 text-white shadow-md scale-105 transition-all";
            } else if (tab === 'lesson2') {
                document.getElementById('lesson2-section').classList.remove('hidden');
                nav2.className = "flex items-center space-x-1 px-4 py-2 rounded-full bg-green-500 text-white shadow-md scale-105 transition-all";
            }
        }

        // --- 1êµì‹œ ë¡œì§ ---
        function setL1Step(step) {
            for(let i=0; i<=3; i++) {
                const el = document.getElementById(`l1-step-${i}`);
                if(el) el.classList.add('hidden');
            }
            document.getElementById('l1-finish').classList.add('hidden');

            if(step <= 3) {
                document.getElementById(`l1-step-${step}`).classList.remove('hidden');
            } else {
                document.getElementById('l1-finish').classList.remove('hidden');
            }
            document.getElementById('l1-progress').style.width = `${((step + 1) / 4) * 100}%`;
        }

        // í™œë™ 1: ì•„í”ˆ ì§€êµ¬
        function changeTemp(delta) {
            temp = Math.max(0, Math.min(5, temp + delta));
            document.getElementById('temp-count').innerText = temp;
            
            const visual = document.getElementById('earth-visual');
            visual.style.filter = `hue-rotate(-${temp * 30}deg) saturate(${100 + temp * 20}%)`;
            
            const s1 = document.getElementById('earth-sweat');
            const s2 = document.getElementById('earth-sweat-2');
            if(temp > 2) {
                s1.classList.remove('hidden'); s2.classList.remove('hidden');
            } else {
                s1.classList.add('hidden'); s2.classList.add('hidden');
            }

            // ë‚˜ë¬´ ì—…ë°ì´íŠ¸ (íŠ¸ë¦¬ íš¨ê³¼)
            updateTrees(delta);
        }

        function updateTrees(delta) {
            const container = document.getElementById('tree-layer');
            
            if (delta < 0) { // ë‚˜ë¬´ ì‹¬ê¸°
                const tree = document.createElement('div');
                tree.className = 'absolute text-3xl animate-bounce-slow select-none tree-item';
                tree.innerText = 'ğŸŒ³';
                
                // ëœë¤ ìœ„ì¹˜ (ì¤‘ì‹¬ì—ì„œ ì¼ì • ê±°ë¦¬ ì´ë‚´)
                const angle = Math.random() * 2 * Math.PI;
                const radius = Math.random() * 40; // 0 ~ 40%
                const x = 50 + radius * Math.cos(angle);
                const y = 50 + radius * Math.sin(angle);
                
                tree.style.left = `${x}%`;
                tree.style.top = `${y}%`;
                tree.style.transform = 'translate(-50%, -50%)';
                
                container.appendChild(tree);
            } else if (delta > 0) { // íƒ„ì†Œ ì´ë¶ˆ (ë‚˜ë¬´ ì œê±°)
                const trees = container.getElementsByClassName('tree-item');
                if(trees.length > 0) {
                    // ë§ˆì§€ë§‰ì— ì¶”ê°€ëœ ë‚˜ë¬´ ì œê±°
                    container.removeChild(trees[trees.length - 1]);
                }
            }
        }

        // í™œë™ 2: ì €ìš¸ ê²Œì„
        function updateBalance(val) {
            balance += val;
            document.getElementById('balance-val').innerText = (balance > 0 ? "+" : "") + balance;
            
            const bar = document.getElementById('scale-bar');
            const left = document.getElementById('scale-left');
            const right = document.getElementById('scale-right');
            const msg = document.getElementById('balance-msg');
            const finishBtn = document.getElementById('btn-l1-finish');

            if (balance > 0) {
                bar.className = "w-64 h-2 bg-gray-800 transition-transform duration-500 origin-center rounded-full rotate-12";
                left.classList.replace('-mb-4', 'mb-8'); left.classList.replace('mb-0', 'mb-8');
                right.classList.replace('mb-8', '-mb-4'); right.classList.replace('mb-0', '-mb-4');
                msg.innerText = "íƒ„ì†Œê°€ ë„ˆë¬´ ë§ì•„ìš”! ì¤„ì—¬ì£¼ì„¸ìš”!";
                msg.className = "p-3 rounded-lg font-bold text-center w-full bg-gray-100";
                finishBtn.classList.add('hidden');
            } else if (balance < 0) {
                bar.className = "w-64 h-2 bg-gray-800 transition-transform duration-500 origin-center rounded-full -rotate-12";
                left.classList.replace('mb-8', '-mb-4'); left.classList.replace('mb-0', '-mb-4');
                right.classList.replace('-mb-4', 'mb-8'); right.classList.replace('mb-0', 'mb-8');
                msg.innerText = "ë„ˆë¬´ ë§ì´ ì¤„ì˜€ë‚˜? ê· í˜•ì„ ë§ì¶°ì£¼ì„¸ìš”!";
                msg.className = "p-3 rounded-lg font-bold text-center w-full bg-gray-100";
                finishBtn.classList.add('hidden');
            } else {
                bar.className = "w-64 h-2 bg-gray-800 transition-transform duration-500 origin-center rounded-full rotate-0";
                left.classList.replace('mb-8', 'mb-0'); left.classList.replace('-mb-4', 'mb-0');
                right.classList.replace('mb-8', 'mb-0'); right.classList.replace('-mb-4', 'mb-0');
                msg.innerText = "ì™€! íƒ„ì†Œì¤‘ë¦½(0) ì„±ê³µ! ì§€êµ¬ê°€ ì‹œì›í•´ì¡Œì–´ìš”!";
                msg.className = "p-3 rounded-lg font-bold text-center w-full bg-green-100 text-green-800 animate-pulse";
                finishBtn.classList.remove('hidden');
            }
        }

        // í™œë™ 3: í€´ì¦ˆ
        function checkQuiz(answer) {
            const q = quizData[currentQuizIdx];
            const isCorrect = (answer === q.a);
            const resultDiv = document.getElementById('quiz-result');
            
            resultDiv.classList.remove('hidden', 'bg-green-100', 'bg-orange-100');
            resultDiv.classList.add(isCorrect ? 'bg-green-100' : 'bg-orange-100');
            
            let html = `<p class="text-2xl font-bold mb-2">${isCorrect ? "ì •ë‹µì…ë‹ˆë‹¤! â­•" : "í‹€ë ¸ì–´ìš” âŒ"}</p>`;
            if(!isCorrect && q.exp) html += `<p class="text-gray-700">${q.exp}</p>`;
            resultDiv.innerHTML = html;

            if(isCorrect) {
                setTimeout(() => {
                    currentQuizIdx++;
                    if(currentQuizIdx < quizData.length) {
                        document.getElementById('quiz-q').innerText = quizData[currentQuizIdx].q;
                        resultDiv.classList.add('hidden');
                    } else {
                        setL1Step(4); // Finish
                    }
                }, 2000);
            }
        }

        // --- 2êµì‹œ ë¡œì§ ---
        function setL2Step(step) {
            for(let i=0; i<=3; i++) {
                document.getElementById(`l2-step-${i}`).classList.add('hidden');
            }
            document.getElementById(`l2-step-${step}`).classList.remove('hidden');
            document.getElementById('l2-progress').style.width = `${((step + 1) / 4) * 100}%`;
        }

        // í™œë™ 1: ë³´ë¬¼ì°¾ê¸°
        function foundItem(id) {
            if(!foundItems.includes(id)) {
                foundItems.push(id);
                const btn = document.getElementById(`hunt-btn-${id}`);
                btn.className = "p-4 rounded-xl border-2 bg-green-100 border-green-400 scale-95 transition-all flex flex-col items-center h-32 justify-center";
                btn.innerHTML = `<div class="text-3xl mb-2">${huntData[id].icon}</div><div class="font-bold text-gray-700">${huntData[id].place}</div><div class="text-xs text-green-700 mt-1 font-medium">${huntData[id].action}</div>`;
                
                document.getElementById('hunt-count').innerText = foundItems.length;
                
                const msgBox = document.getElementById('hunt-msg');
                msgBox.classList.remove('hidden');
                document.getElementById('hunt-text').innerText = huntData[id].text;

                if(foundItems.length === 4) {
                    document.getElementById('btn-l2-next1').classList.remove('hidden');
                }
            }
        }

        // í™œë™ 2: ë¹™ê³ 
        function initBingo() {
            const grid = document.getElementById('bingo-grid');
            bingoTexts.forEach((text, idx) => {
                const btn = document.createElement('button');
                btn.className = "aspect-square rounded-lg p-2 flex items-center justify-center text-sm md:text-base font-bold transition-all shadow-sm bg-white border-2 border-green-100 hover:bg-green-50 text-gray-700";
                btn.innerText = text;
                btn.onclick = () => toggleBingo(idx, btn, text);
                grid.appendChild(btn);
            });
        }

        function toggleBingo(idx, btn, text) {
            bingoChecked[idx] = !bingoChecked[idx];
            if(bingoChecked[idx]) {
                btn.className = "aspect-square rounded-lg p-2 flex flex-col items-center justify-center text-sm md:text-base font-bold transition-all shadow-inner bg-green-500 text-white";
                btn.innerHTML = `<i data-lucide="check-circle-2" class="mb-1"></i><span class="text-xs">ì•½ì†!</span>`;
                lucide.createIcons();
            } else {
                btn.className = "aspect-square rounded-lg p-2 flex items-center justify-center text-sm md:text-base font-bold transition-all shadow-sm bg-white border-2 border-green-100 hover:bg-green-50 text-gray-700";
                btn.innerText = text;
            }
            
            const count = bingoChecked.filter(Boolean).length;
            document.getElementById('bingo-count').innerText = count;
            
            const nextBtn = document.getElementById('btn-bingo-next');
            if(count >= 3) {
                nextBtn.disabled = false;
                nextBtn.innerText = "íˆì–´ë¡œ ì„ ì„œí•˜ëŸ¬ ê°€ê¸°";
                nextBtn.className = "btn-primary w-full bg-green-500 text-white py-3 rounded-xl font-bold hover:bg-green-600 transition-colors";
            } else {
                nextBtn.disabled = true;
                nextBtn.innerText = "3ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”";
                nextBtn.className = "w-full bg-gray-300 text-gray-500 py-3 rounded-xl cursor-not-allowed";
            }
        }

        // í™œë™ 3: ì„ ì„œ ë° ì¸ì¦ì„œ
        function checkNameInput() {
            const val = document.getElementById('hero-name-input').value.trim();
            const btn = document.getElementById('btn-generate-cert');
            if(val) {
                btn.disabled = false;
                btn.className = "bg-green-500 text-white w-full py-3 rounded-xl font-bold hover:bg-green-600 transition-colors";
            } else {
                btn.disabled = true;
                btn.className = "bg-gray-300 text-gray-500 w-full py-3 rounded-xl font-bold cursor-not-allowed transition-colors";
            }
        }

        function showCertificate() {
            const name = document.getElementById('hero-name-input').value;
            document.getElementById('cert-name').innerText = name;
            setL2Step(3);
        }

        // PDF ë‹¤ìš´ë¡œë“œ ë¡œì§
        async function downloadPDF() {
            const element = document.getElementById('certificate-card');
            const btn = document.getElementById('btn-pdf');
            const name = document.getElementById('hero-name-input').value;
            
            btn.innerHTML = "ìƒì„± ì¤‘...";
            btn.disabled = true;

            try {
                const canvas = await html2canvas(element, { scale: 2, useCORS: true });
                const imgData = canvas.toDataURL('image/png');
                
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('landscape', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`${name}_íƒ„ì†Œì¤‘ë¦½íˆì–´ë¡œ_ì¸ì¦ì„œ.pdf`);
            } catch (err) {
                console.error(err);
                alert('PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            } finally {
                btn.innerHTML = '<i data-lucide="download" class="mr-2"></i> PDFë¡œ ì €ì¥í•˜ê¸°';
                btn.disabled = false;
                lucide.createIcons(); // Re-render icon
            }
        }
    </script>
</body>
</html>
